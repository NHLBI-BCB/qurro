<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>
            rankratioviz
        </title>
        <link rel="shortcut icon" href="icon.png" />
        <link rel="stylesheet" href="rankratioviz.css" />
        <!-- The Vega* dependencies are required for Vega-Embed: see the
             "basic example" in https://github.com/vega/vega-embed. -->
        <script src="vendor/vega.min.js"></script>
        <script src="vendor/vega-lite.min.js"></script>
        <script src="vendor/vega-embed.min.js"></script>
    </head>

    <body>
        <table id="rrvTable">
            <!-- Show the actual plots -->
            <tr>
                <td class="plotTD" id="rankPlotTD">
                    <div id="rankPlot"></div>
                </td>
                <td class="plotTD" id="samplePlotTD">
                    <div id="samplePlot"></div>
                </td>
            </tr>
            <tr>
                <td class="topAlignedTD">
                    <h3>Single-Feature Selections</h3>
                    <p>
                        Select two features from the rank plot (left) to display
                        their log ratios for each sample in the sample
                        scatterplot (right).
                    </p>
                    <!-- Note for future reference: whitespace between the
                        start and end tag of a textarea is apparently
                        interpreted as just that, and preserved in the textarea
                        on the page.
                        (So that's why the textarea declarations below are on
                        long lines.)
                    -->
                    <p>
                        <textarea id="topTaxaDisplay" rows="6"></textarea>
                    </p>
                    <hr />
                    <p>
                        <textarea id="botTaxaDisplay" rows="6"></textarea>
                    </p>
                </td>
                <td>
                    <h3>Multi-Feature Selections</h3>
                    <p>
                        Use the controls here to show more complex log ratios in
                        the sample scatterplot.
                    </p>
                    <p>
                        Filter numerator to features that
                        <select id="topSearch">
                            <option value="rank">
                                contain the exact rank(s)
                            </option>
                            <option value="text">
                                contain the exact text
                            </option>
                        </select>
                        <input type="text" id="topText" size="40" />
                    </p>
                    <p>
                        Filter denominator to features that
                        <select id="botSearch">
                            <option value="rank">
                                contain the exact rank(s)
                            </option>
                            <option value="text">
                                contain the exact text
                            </option>
                        </select>
                        <input type="text" id="botText" size="40" />
                    </p>

                    <p>
                        <button id="multiFeatureButton">
                            Regenerate sample plot
                        </button>
                    </p>
                    <!--
                    <p>
                        <label for="selectMicrobesFileSelector">
                            <strong>
                                Upload "Select Features" List:
                            </strong>
                        </label>
                        TODO make RRVDisplay get this input by ID
                            and set its onchange to the RRVDisplay instance's
                            particular select microbes or whatever function
                        <input type="file" id="selectMicrobesFileSelector"
                            onChange="ssmv.uploadSelectMicrobesFile();" />
                    </p>
                    <p>
                        <label for="zeroFillInput">
                            <strong>
                                Value to fill in for zero-abundance features:
                            </strong>
                        </label>
                        <input type="number" id="zeroFillInput" min="0"
                            max="1000" value="0">
                        </input>
                    </p>
                    -->
                </td>
            </tr>
        </table>

        <!-- This file will be created by the rankratioviz python script.
             It will contain definitions for the rank plot and sample plot
             JSON, and will use these to create an instance of RRVDisplay
             (thereby starting rankratioviz).

             Leaving this code at the bottom of the page is sufficient to wait
             until the rest of the stuff in the page has been loaded:
             see https://stackoverflow.com/a/1861233.

             We need to wait for the page to load before trying to construct
             the Vega plots using vegaEmbed(); otherwise, main.js' uses of
             vegaEmbed will fail with the "ERROR: Signal bind element not
             found: null" error described at
             https://github.com/vega/vega-embed/issues/64.
        -->
        <script data-main="main" src="vendor/require.js"></script>
    </body>
</html>
