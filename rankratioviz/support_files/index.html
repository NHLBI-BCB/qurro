<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>
            rankratioviz
        </title>
        <link rel="shortcut icon" href="icon.png" />
        <link rel="stylesheet" href="rankratioviz.css" />
    </head>

    <body>
        <div class="twoColumnRow">
            <div>
                <div id="rankPlot"></div>
                <div class="plotControlBlock">
                    <label for="rankField">Ranking</label>
                    <select id="rankField"> </select>
                </div>
            </div>
            <div>
                <div id="samplePlot"></div>
                <div class="plotControlBlock">
                    <!-- NOTE that the scale/field select values below will be
                         literally used in the JSON.
                         Also, the first-listed one is the default. Since the
                         default x-axis is the balance (quant.) and the default
                         color is the sample ID (nom.), we adjust the default
                         scale types accordingly.
                    -->
                    <div class="plotControlBlock">
                        <label for="xAxisField">x-axis field</label>
                        <select id="xAxisField"> </select>
                        <label for="xAxisScale">x-axis scale type</label>
                        <select id="xAxisScale">
                            <option value="quantitative">Quantitative</option>
                            <option value="nominal">Categorical</option>
                        </select>
                    </div>
                    <div class="plotControlBlock">
                        <label for="colorField">Color field</label>
                        <select id="colorField"> </select>
                        <label for="colorScale">Color scale type</label>
                        <select id="colorScale">
                            <option value="nominal">Categorical</option>
                            <option value="quantitative">Quantitative</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
        <div class="twoColumnRow">
            <div>
                <!-- Note for future reference: whitespace between the
                    start and end tag of a textarea is apparently
                    interpreted as just that, and preserved in the textarea
                    on the page.
                    (So that's why the textarea declarations below are on
                    long lines.)
                -->
                <p>
                    <textarea
                        id="topFeaturesDisplay"
                        class="fancyBorder num"
                        rows="6"
                    ></textarea>
                </p>
                <hr />
                <p>
                    <textarea
                        id="botFeaturesDisplay"
                        class="fancyBorder den"
                        rows="6"
                    ></textarea>
                </p>
            </div>
            <div id="selectionControls">
                <h3>Selecting Features</h3>
                <p>
                    To construct a log ratio, select feature(s) by clicking on
                    the plot of feature ranks on the left or by searching using
                    the controls below.
                </p>
                <p>
                    Filter numerator to features that
                    <select class="fancyBorder num" id="topSearch">
                        <option value="text">
                            contain the exact text
                        </option>
                        <option value="rank">
                            contain the exact taxonomic rank(s)
                        </option>
                    </select>
                    <input
                        type="text"
                        class="fancyBorder num"
                        id="topText"
                        size="30"
                    />
                </p>
                <p>
                    Filter denominator to features that
                    <select class="fancyBorder den" id="botSearch">
                        <option value="text">
                            contain the exact text
                        </option>
                        <option value="rank">
                            contain the exact taxonomic rank(s)
                        </option>
                    </select>
                    <input
                        type="text"
                        class="fancyBorder den"
                        id="botText"
                        size="30"
                    />
                </p>

                <!-- Invisible <a> used for downloading data URIs.
                     Based on #downloadHelper in MetagenomeScope's viewer
                     interface.
                -->
                <a id="downloadHelper"></a>
                <p>
                    <button id="multiFeatureButton">
                        Regenerate sample plot
                    </button>
                </p>
                <p>
                    <button id="exportDataButton">
                        Export currently used data
                    </button>
                </p>
            </div>
        </div>
        <!--
        <p>
            <label for="selectMicrobesFileSelector">
                <strong>
                    Upload "Select Features" List:
                </strong>
            </label>
            TODO make RRVDisplay get this input by ID
                and set its onchange to the RRVDisplay instance's
                particular select microbes or whatever function
            <input type="file" id="selectMicrobesFileSelector"
                onChange="ssmv.uploadSelectMicrobesFile();" />
        </p>
        <p>
            <label for="zeroFillInput">
                <strong>
                    Value to fill in for zero-abundance features:
                </strong>
            </label>
            <input type="number" id="zeroFillInput" min="0"
                max="1000" value="0">
            </input>
        </p>
        -->
        <!-- This file will be edited by the rankratioviz python script to
             contain definitions for the rank plot and sample plot JSON,
             and will use these to create an instance of RRVDisplay
             (thereby starting rankratioviz).

             Leaving this code at the bottom of the page is sufficient to wait
             until the rest of the stuff in the page has been loaded:
             see https://stackoverflow.com/a/1861233.

             We need to wait for the page to load before calling
             RRVDisplay.makePlots(); otherwise, we'll get (at least) the error
             "ERROR: Signal bind element not found: null" described at
             https://github.com/vega/vega-embed/issues/64.
        -->
        <script data-main="main" src="vendor/require.js"></script>
    </body>
</html>
